#pragma checksum "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "e5d625986f5949227089818517704aa725b80101"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorAPIClient.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using BlazorAPIClient;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\_Imports.razor"
using BlazorAPIClient.Shared;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/uploadimage")]
    public partial class UploadImage : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "container");
            __builder.AddMarkupContent(2, "<div class=\"text-center\"><div class=\"h1 rotate-15\"><i class=\"bi bi-card-image\"></i></div>\r\n        <h1 class=\"h4 text-gray-900 mb-4\">\r\n            Upload One or More of Your Pictures!\r\n        </h1></div>\r\n\r\n    ");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "row");
            __builder.OpenElement(5, "div");
            __builder.AddAttribute(6, "class", "mx-auto");
#nullable restore
#line 16 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
             if (isLoaded)
            {
                

#line default
#line hidden
#nullable disable
#nullable restore
#line 18 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                 if (ImageCount == 1)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "h-75");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "col-12 col-lg-6 card mb-3 mx-auto");
            __builder.OpenElement(11, "img");
            __builder.AddAttribute(12, "class", "card-img-top h-100");
            __builder.AddAttribute(13, "src", 
#nullable restore
#line 22 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                                                  ImageUri

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(14, "alt", "Card image cap");
            __builder.CloseElement();
            __builder.AddMarkupContent(15, "\r\n                            ");
            __builder.OpenElement(16, "div");
            __builder.AddAttribute(17, "class", "card-body");
            __builder.OpenElement(18, "h5");
            __builder.AddAttribute(19, "class", "card-title");
            __builder.AddContent(20, 
#nullable restore
#line 24 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                                        ImageName

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 28 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                }
                else
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(21, "div");
            __builder.AddAttribute(22, "class", "row h-50");
#nullable restore
#line 32 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                         foreach (var image in images)
                        {


#line default
#line hidden
#nullable disable
            __builder.OpenElement(23, "div");
            __builder.AddAttribute(24, "class", "col-xs-12 col-md-3 col-lg-2 mt-2");
            __builder.OpenElement(25, "div");
            __builder.AddAttribute(26, "class", "card pr-md-1");
            __builder.OpenElement(27, "div");
            __builder.AddAttribute(28, "class", "card-body");
            __builder.OpenElement(29, "p");
            __builder.AddAttribute(30, "class", "card-title");
            __builder.AddContent(31, 
#nullable restore
#line 38 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                                               image.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(32, "\r\n                                    ");
            __builder.OpenElement(33, "img");
            __builder.AddAttribute(34, "class", "card-img-bottom w-100");
            __builder.AddAttribute(35, "src", 
#nullable restore
#line 40 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                                                             image.Url

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(36, "alt", "Card image cap");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 43 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"

                        }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 46 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 46 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                 
            }
            else
            {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(37, "<div class=\"row\"><div class=\"col-12 mx-auto py-5 text-center\"><p>There is no image</p></div></div>");
#nullable restore
#line 55 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(38, "\r\n\r\n    ");
            __builder.OpenElement(39, "div");
            __builder.AddAttribute(40, "class", "row");
            __builder.OpenElement(41, "div");
            __builder.AddAttribute(42, "class", "col-6 mx-auto pb-5");
            __builder.OpenElement(43, "div");
            __builder.AddAttribute(44, "class", "default-input-area d-flex justify-content-center");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputFile>(45);
            __builder.AddAttribute(46, "OnChange", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.InputFileChangeEventArgs>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.InputFileChangeEventArgs>(this, 
#nullable restore
#line 63 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                     LoadImage

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(47, "accept", "image/jpeg, image/png");
            __builder.AddAttribute(48, "multiple", true);
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\r\n\r\n    ");
            __builder.OpenElement(50, "div");
            __builder.AddAttribute(51, "class", "col-12");
            __builder.OpenElement(52, "form");
            __builder.OpenElement(53, "div");
            __builder.AddAttribute(54, "class", "row justify-content-center mb-5");
            __builder.OpenElement(55, "div");
            __builder.AddAttribute(56, "class", "col-sm-12 col-md-4");
            __builder.OpenElement(57, "div");
            __builder.AddAttribute(58, "class", "col-md-8 form-group text-center");
            __builder.AddMarkupContent(59, "<label for=\"selectAlbum\">Select target album below</label>\r\n                        ");
            __builder.OpenElement(60, "select");
            __builder.AddAttribute(61, "class", "form-control");
            __builder.AddAttribute(62, "id", "selectAlbum");
#nullable restore
#line 76 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                             if (albums.Count() > 0)
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(63, "option");
            __builder.AddAttribute(64, "value", "0");
            __builder.AddContent(65, "All images");
            __builder.CloseElement();
#nullable restore
#line 79 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                foreach (var album in albums)
                                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(66, "option");
            __builder.AddAttribute(67, "value", 
#nullable restore
#line 81 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                                    album.Id

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(68, 
#nullable restore
#line 81 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                                               album.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 82 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                                }
                            }
                            else
                            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(69, "option");
            __builder.AddAttribute(70, "value", "0");
            __builder.AddContent(71, "All images");
            __builder.CloseElement();
#nullable restore
#line 87 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(72, "\r\n                ");
            __builder.AddMarkupContent(73, "<div class=\"d-flex col-sm-6 col-md-2\"><button type=\"submit\" class=\"btn btn-outline-info btn-block align-self-center\"><i class=\"bi bi-cloud-upload\"></i><span class=\"px-3\">Upload</span></button></div>");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 101 "C:\Users\krzys\OneDrive\Dokumenty\GitHub\2021_BD2_S10_KOST\Service\Pages\UploadImage.razor"
       

    IReadOnlyList<IBrowserFile> fileList;
    List<(string Url, string Name)> images;

    string ImageUri, ImageName;
    int ImageCount = 0;
    bool isLoaded = false;
    long maxFileSize = 1024 * 1024 * 15;

    async Task LoadImage(InputFileChangeEventArgs eventArgs)
    {

        if(eventArgs.FileCount > 1)
        {
            fileList = eventArgs.GetMultipleFiles();
            images = new List<(string, string)>();

            foreach(var file in fileList)
            {
                images.Add((await GetImageUrl(file), file.Name));
            }

            ImageCount = eventArgs.FileCount;
            isLoaded = true;
        }
        else
        {
            ImageCount = 1;
            var file = eventArgs.File;
            images = null;
            ImageUri = await GetImageUrl(file);
            ImageName = file.Name;
            isLoaded = true;
        }
    }

    private async Task<string> GetImageUrl(IBrowserFile file)
    {
        var imgFile = await file.RequestImageFileAsync("image/jpeg", 6000, 6000);

        using System.IO.Stream fileStream = imgFile.OpenReadStream(maxFileSize);
        using System.IO.MemoryStream ms = new();

        await fileStream.CopyToAsync(ms);
        var convertedStream = Convert.ToBase64String(ms.ToArray());
        var uri = "data:image/jpeg;base64," + convertedStream;

        return uri;
    }

    public class TempAlbumModel
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Brief { get; set; }
        public string PrivacyType { get; set; }
    }

    List<TempAlbumModel> albums = new List<TempAlbumModel>()
    {
        new TempAlbumModel(){ Id = 1, Name = "Dogs", Brief = "Best pets", PrivacyType = "Private" },
        new TempAlbumModel(){ Id = 2, Name = "Cats", Brief = "All my kitties", PrivacyType = "Private" },
        new TempAlbumModel(){ Id = 3,Name = "Memes", Brief = "Hehehehehe", PrivacyType = "Public" },
        new TempAlbumModel(){ Id = 4, Name = "Wedding", Brief = "Wedding 2012", PrivacyType = "Private" }
    };


#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
